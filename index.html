<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bukit Bagarurung - Wisata Kuningan</title>
    <style>
        /* ===== RESET & DASAR ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            font-weight: normal;
            font-size: 16px;
            background: linear-gradient(to bottom, #e8f5e9, #ffffff);
            color: #1b5e20;
            transition: background 0.5s, color 0.5s;
            line-height: 1.6;
        }

        body.dark {
            background: linear-gradient(to bottom, #0f2027, #203a43);
            color: white;
        }

        /* LOADING ANIMASI */
        #loading {
            position: fixed;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            transition: opacity 0.5s;
        }

        #loading.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #1b5e20;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* HEADER */
        header {
            height: 60vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(24px, 5vw, 28px);
            font-weight: bold;
            text-align: center;
            background-image: url('unnamed (2).webp');
            background-size: cover;
            background-position: center;
            color: white;
            text-shadow: 0 5px 20px rgba(0,0,0,0.8);
            position: relative;
            width: 100%;
        }

        header::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.3);
        }

        header h1 {
            position: relative;
            z-index: 1;
            padding: 0 20px;
            text-align: center;
        }

        /* TOMBOL FIXED */
        .toggle, .music-btn {
            position: fixed;
            padding: 8px 16px;
            background: #1b5e20;
            color: white;
            border-radius: 30px;
            cursor: pointer;
            z-index: 1000;
            font-size: 12px;
            font-weight: bold;
            border: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .toggle {
            top: 10px;
            right: 10px;
        }

        .music-btn {
            top: 10px;
            left: 10px;
        }

        /* MAIN CONTAINER */
        .container {
            max-width: 900px;
            margin: 30px auto;
            padding: 0 20px;
        }

        /* CARD STYLE */
        .text-section, .photo-section, .map-section, .comment-section, .kelompok, .wa-link {
            width: 100%;
            margin: 30px auto;
            padding: 25px;
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        body.dark .text-section, 
        body.dark .photo-section, 
        body.dark .map-section, 
        body.dark .comment-section,
        body.dark .kelompok,
        body.dark .wa-link {
            background: rgba(0,0,0,0.7);
        }

        h2 {
            text-align: center;
            margin-bottom: 25px;
            font-size: 26px;
            color: #1b5e20;
            font-weight: bold;
        }

        body.dark h2 {
            color: #a5d6a7;
        }

        /* TEKS SECTION - RATA KANAN-KIRI */
        .text-section p {
            text-align: justify;
            margin-bottom: 20px;
            font-size: 16px;
            line-height: 1.8;
        }

        /* GALERI FOTO */
        .photo-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .photo-item {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            cursor: pointer;
            max-width: 500px;
            margin: 0 auto;
        }

        .photo-item img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            display: block;
            transition: transform 0.5s;
        }

        .photo-item:hover {
            transform: scale(1.02);
            box-shadow: 0 15px 30px rgba(0,0,0,0.4);
        }

        .photo-item.flip img {
            transform: rotateY(180deg) scale(1.1);
        }

        .photo-item.tilt img {
            animation: tilt3D 0.5s ease;
        }

        @keyframes tilt3D {
            0% { transform: rotateX(0deg) rotateY(0deg); }
            25% { transform: rotateX(10deg) rotateY(10deg); }
            50% { transform: rotateX(-5deg) rotateY(-5deg); }
            100% { transform: rotateX(0deg) rotateY(0deg); }
        }

        /* SPOTIFY */
        #spotifyContainer {
            margin-top: 20px;
            border-radius: 12px;
            overflow: hidden;
        }

        /* PETA LOKASI - TITIK SPESIFIK */
        .map-container {
            width: 100%;
            height: 350px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .map-container iframe {
            width: 100%;
            height: 100%;
            border: 0;
        }

        .map-section p {
            text-align: center;
            font-size: 15px;
            margin-top: 10px;
            color: #555;
        }

        body.dark .map-section p {
            color: #ccc;
        }

        /* KOMENTAR */
        .comment-section textarea {
            width: 100%;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #ccc;
            font-size: 15px;
            margin-bottom: 15px;
            resize: vertical;
            font-family: inherit;
        }

        .comment-section button {
            background: #1b5e20;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            font-size: 15px;
            display: block;
            margin: 0 auto;
            transition: background 0.3s;
        }

        .comment-section button:hover {
            background: #2e7d32;
        }

        .comment-list {
            margin-top: 25px;
        }

        .comment-item {
            background: rgba(0,0,0,0.05);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 12px;
        }

        body.dark .comment-item {
            background: rgba(255,255,255,0.1);
        }

        .comment-time {
            font-size: 12px;
            color: #888;
            margin-top: 8px;
            text-align: right;
        }

        /* ADMIN PANEL */
        .admin-panel {
            max-width: 600px;
            margin: 30px auto;
            padding: 25px;
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        body.dark .admin-panel {
            background: rgba(0,0,0,0.8);
        }

        .admin-panel h2 {
            margin-bottom: 20px;
        }

        .admin-panel input, 
        .admin-panel button, 
        .admin-panel textarea, 
        .admin-panel select {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
            border: 1px solid #ccc;
            font-size: 14px;
        }

        .admin-panel button {
            background: #1b5e20;
            color: white;
            border: none;
            cursor: pointer;
            font-weight: bold;
        }

        .admin-panel .logout-btn {
            background: #f44336;
        }

        .error-msg { color: #f44336; font-size: 14px; }
        .success-msg { color: #4caf50; font-size: 14px; }

        .hidden { display: none; }

        .admin-badge {
            position: fixed;
            bottom: 10px;
            left: 10px;
            background: #ff6b6b;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        /* KELOMPOK */
        .kelompok {
            text-align: center;
        }

        .kelompok p {
            font-size: 16px;
            margin: 8px 0;
        }

        /* LINK WA */
        .wa-link {
            text-align: center;
        }

        .wa-link a {
            color: #1b5e20;
            font-weight: bold;
            text-decoration: none;
            background: #e8f5e9;
            padding: 12px 30px;
            border-radius: 50px;
            display: inline-block;
            border: 2px solid #1b5e20;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .wa-link a:hover {
            background: #1b5e20;
            color: white;
        }

        body.dark .wa-link a {
            color: #a5d6a7;
            background: #1e2a3a;
            border-color: #a5d6a7;
        }

        body.dark .wa-link a:hover {
            background: #a5d6a7;
            color: #1e2a3a;
        }

        footer {
            text-align: center;
            padding: 20px;
            background: #1b5e20;
            color: white;
            margin-top: 40px;
        }

        /* DAUN JATUH */
        .daun {
            position: fixed;
            top: -50px;
            font-size: 24px;
            animation: jatuh linear infinite;
            pointer-events: none;
            z-index: 999;
            display: none;
        }

        .daun.visible {
            display: block;
        }

        @keyframes jatuh {
            to { transform: translateY(110vh); }
        }

        /* MODAL FOTO */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            padding-top: 50px;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
        }

        .modal-content {
            margin: auto;
            display: block;
            max-width: 90%;
            max-height: 90%;
            animation: zoom 0.3s;
        }

        @keyframes zoom {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .close {
            position: absolute;
            top: 20px;
            right: 35px;
            color: white;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
        }

        /* RESPONSIVE */
        @media (max-width: 600px) {
            .container { padding: 0 15px; }
            h2 { font-size: 22px; }
            .photo-item img { height: 250px; }
            .map-container { height: 250px; }
            .toggle, .music-btn { font-size: 11px; padding: 6px 12px; }
        }
    </style>
</head>
<body>

<!-- LOADING -->
<div id="loading">
    <div class="loader"></div>
    <p style="margin-top: 20px; color: #1b5e20;">Loading Bukit Bagarurung...</p>
</div>

<!-- AUDIO KLIK (file click.mp3 - harus ada di folder yang sama) -->
<audio id="clickSound" preload="auto">
    <source src="click.mp3" type="audio/mpeg">
    <!-- Fallback: kalo file ga ada, pake base64 bunyi klik pendek -->
    <source src="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMQAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAADMgD///////////////////////////////////////////8AAAA8TEFNRTMuMTAwAc8AAAAAAAAAABSAJAYjQQABeAAALRg4Yv/+MYwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" type="audio/mpeg">
</audio>

<div id="myModal" class="modal">
    <span class="close" onclick="closeModal()">&times;</span>
    <img class="modal-content" id="modalImage">
</div>

<button class="toggle" onclick="toggleMode()">Dark Mode</button>
<button class="music-btn" onclick="toggleSpotify()">Putar Lagu</button>
<div class="admin-badge" onclick="showAdminPanel()">Akses Admin</div>

<header>
    <h1>Bukit Bagarurung</h1>
</header>

<div class="container">
    <!-- DESKRIPSI - RATA KANAN-KIRI -->
    <div class="text-section">
        <h2>Deskripsi</h2>
        <div id="deskripsiText">
            <p>Sejarah Bukit Bagarurung berawal sebagai kawasan hutan alami di wilayah Darma, Kabupaten Kuningan, Provinsi Jawa Barat. Area ini merupakan bagian dari bentang alam perbukitan yang mengelilingi kawasan Waduk Darma dan lereng Gunung Ciremai.</p>
            <p>Pada masa kolonial Hindia Belanda, puncak bukit ini dimanfaatkan sebagai titik peneropongan atau pengamatan wilayah. Letaknya yang tinggi dan terbuka menjadikannya strategis untuk memantau area sekitar. Sisa-sisa struktur lama dilaporkan pernah ditemukan di area puncak sebagai jejak fungsi tersebut.</p>
            <p>Setelah kemerdekaan Indonesia, kawasan ini kembali berfungsi sebagai hutan biasa dan dikelola dalam sistem kehutanan negara, termasuk dalam pengelolaan Perhutani. Selama beberapa dekade tidak ada pengembangan khusus sebagai destinasi wisata.</p>
            <p>Memasuki awal dekade 2020-an, potensi panoramanya mulai dikenal masyarakat. Dari puncaknya terlihat jelas Waduk Darma dan Gunung Ciremai, sehingga kawasan ini kemudian dikembangkan secara bertahap menjadi lokasi wisata alam dan camping ground oleh masyarakat setempat. Hingga sekarang, Bukit Bagarurung berada dalam tahap pengembangan sebagai destinasi wisata alam yang terus ditata fasilitas dan aksesnya.</p>
        </div>
    </div>

    <!-- GALERI FOTO -->
    <div class="photo-section">
        <h2>Galeri Foto</h2>
        <div class="photo-grid" id="photoGrid"></div>
        <div id="spotifyContainer"></div>
    </div>

    <!-- PETA LOKASI - TITIK SPESIFIK BAGARURUNG -->
    <div class="map-section">
        <h2>üìç Lokasi Bukit Bagarurung</h2>
        <div class="map-container">
            <!-- Google Maps Embed dengan koordinat spesifik Bagarurung (Darma, Kuningan) -->
            <!-- Menggunakan mode place dengan query "Bukit Bagarurung" dan koordinat untuk presisi [citation:2][citation:10] -->
            <iframe 
                src="https://www.google.com/maps/embed/v1/place?key=AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg&q=Bukit+Bagarurung&center=-7.0157,108.4112&zoom=17"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade">
            </iframe>
        </div>
        <p style="text-align: center; margin-top: 10px;">üìç Koordinat: 7¬∞00'56.5"S 108¬∞24'40.3"E<br>Desa Sakerta Timur, Kecamatan Darma, Kabupaten Kuningan, Jawa Barat</p>
    </div>

    <!-- KOMENTAR PENGUNJUNG -->
    <div class="comment-section">
        <h2>üí¨ Komentar Pengunjung</h2>
        <textarea id="commentInput" placeholder="Tulis komentar Anda..." rows="3"></textarea>
        <button onclick="addComment()">Kirim Komentar</button>
        <div class="comment-list" id="commentList"></div>
    </div>

    <!-- NAMA KELOMPOK -->
    <div class="kelompok">
        <h2>Nama Kelompok</h2>
        <p>Fawaz</p>
        <p>Dika</p>
        <p>Rama</p>
        <p>Alka</p>
    </div>

    <!-- LINK WA -->
    <div class="wa-link">
        <p>Jika ada yang mau dikoreksi, hubungi saya melalui</p>
        <a href="https://wa.me/6285177595914" target="_blank">WhatsApp</a>
    </div>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel" class="admin-panel hidden">
    <h2>Akses Admin</h2>
    
    <div id="loginForm">
        <input type="password" id="password" placeholder="Masukkan password admin" autocomplete="off">
        <button onclick="checkPassword()">Login</button>
        <div id="loginError" class="error-msg"></div>
    </div>

    <div id="adminFeatures" class="hidden">
        <h3>Edit Deskripsi</h3>
        <textarea id="deskripsiEditor" placeholder="Edit teks deskripsi di sini..."></textarea>
        <button onclick="saveDeskripsi()">Simpan Deskripsi</button>
        
        <h3>Ganti Background</h3>
        <select id="bgGradient">
            <option value="linear-gradient(135deg, #a8e6cf, #d4ed9a)">Hijau Segar</option>
            <option value="linear-gradient(135deg, #89f7fe, #66a6ff)">Biru Laut</option>
            <option value="linear-gradient(135deg, #ff9a9e, #fad0c4)">Sunset</option>
            <option value="linear-gradient(135deg, #a18cd1, #fbc2eb)">Ungu Malam</option>
            <option value="linear-gradient(135deg, #f093fb, #f5576c)">Orange Semangat</option>
            <option value="linear-gradient(135deg, #134e5e, #71b280)">Hijau Hutan</option>
            <option value="linear-gradient(135deg, #ff0000, #ffffff)">Merah Putih</option>
            <option value="linear-gradient(135deg, #f9d423, #4e54c8)">Kuning Biru</option>
        </select>
        <button onclick="applyBackground()">Terapkan Background</button>
        
        <h3>Statistik Pengunjung</h3>
        <p>Total pengunjung: <strong id="adminVisitorCount">0</strong></p>
        <button onclick="resetVisitorCount()">Reset Counter</button>
        
        <button class="logout-btn" onclick="logout()">Logout</button>
        <div id="adminMessage" class="success-msg"></div>
    </div>
</div>

<footer>¬© 2026 Bukit Bagarurung Project | Dikembangkan oleh Kelompok 4</footer>

<script>
// ==================== KONFIGURASI ====================
const ADMIN_PASSWORD = "142004*Wazz";
let photos = [];
let daunInterval = null;
let spotifyVisible = false;

// LAGU SPOTIFY
const spotifyTracks = [
    'https://open.spotify.com/embed/track/5WOSNVChcadlsCRiqXE45K',
    'https://open.spotify.com/embed/track/2wAiFWjRupWmnDkQcu91MF',
    'https://open.spotify.com/embed/track/5drW6PGRxkE6MxttzVLNk5',
    'https://open.spotify.com/embed/track/1bcIiU5FWRa2IYBqx0bk67'
];

// FOTO DEFAULT
const DEFAULT_PHOTOS = ['unnamed (2).webp'];

// ==================== LOAD FOTO ====================
function loadPhotos() {
    const saved = localStorage.getItem('bagarurung_photos');
    photos = saved ? JSON.parse(saved) : [...DEFAULT_PHOTOS];
    renderPhotos();
}

function renderPhotos() {
    const grid = document.getElementById('photoGrid');
    grid.innerHTML = '';
    photos.forEach((photo, index) => {
        const item = document.createElement('div');
        item.className = 'photo-item';
        item.innerHTML = `<img src="${photo}" alt="Bukit Bagarurung" onclick="handlePhotoClick(event, '${photo}')">`;
        grid.appendChild(item);
    });
}

// ==================== SOUND EFFECT KLIK (BENERAN) ====================
function playClickSound() {
    const sound = document.getElementById('clickSound');
    if (sound) {
        sound.currentTime = 0;
        sound.play().catch(e => console.log('Sound error:', e));
    }
}

function handlePhotoClick(event, src) {
    playClickSound(); // Bunyi klik pendek
    
    const img = event.target;
    const parent = img.parentElement;
    
    parent.classList.add('flip', 'tilt');
    setTimeout(() => {
        parent.classList.remove('flip', 'tilt');
    }, 500);
    
    setTimeout(() => openModal(src), 250);
}

function openModal(src) {
    document.getElementById('modalImage').src = src;
    document.getElementById('myModal').style.display = 'block';
}

function closeModal() {
    document.getElementById('myModal').style.display = 'none';
}

// ==================== SPOTIFY ====================
function toggleSpotify() {
    const container = document.getElementById('spotifyContainer');
    const btn = document.querySelector('.music-btn');
    
    if (spotifyVisible) {
        container.innerHTML = '';
        btn.textContent = 'Putar Lagu';
        spotifyVisible = false;
    } else {
        const randomIndex = Math.floor(Math.random() * spotifyTracks.length);
        const trackUrl = spotifyTracks[randomIndex];
        container.innerHTML = `
            <iframe style="border-radius:12px" 
                src="${trackUrl}?utm_source=generator" 
                width="100%" height="152" frameBorder="0" 
                allowfullscreen="" 
                allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                loading="lazy">
            </iframe>
        `;
        const trackNames = ['everything u are', 'Rumah Ke Rumah', 'Secukupnya', 'Evakuasi'];
        btn.textContent = trackNames[randomIndex];
        spotifyVisible = true;
    }
}

// ==================== KOMENTAR ====================
function loadComments() {
    const comments = JSON.parse(localStorage.getItem('bagarurung_comments')) || [];
    const list = document.getElementById('commentList');
    list.innerHTML = '';
    comments.slice().reverse().forEach(comment => {
        list.innerHTML += `
            <div class="comment-item">
                <div>${comment.text}</div>
                <div class="comment-time">${comment.time}</div>
            </div>
        `;
    });
}

function addComment() {
    const input = document.getElementById('commentInput');
    const text = input.value.trim();
    if (text) {
        const comments = JSON.parse(localStorage.getItem('bagarurung_comments')) || [];
        comments.push({
            text: text,
            time: new Date().toLocaleString('id-ID')
        });
        localStorage.setItem('bagarurung_comments', JSON.stringify(comments));
        input.value = '';
        loadComments();
    }
}

// ==================== LOADING ====================
window.addEventListener('load', () => {
    setTimeout(() => {
        document.getElementById('loading').classList.add('hidden');
    }, 1500);
});

// ==================== VISITOR COUNTER ====================
function initVisitorCounter() {
    let count = localStorage.getItem('visitorCount') || 0;
    count = parseInt(count) + 1;
    localStorage.setItem('visitorCount', count);
    document.getElementById('adminVisitorCount').textContent = count;
}

function resetVisitorCount() {
    if (sessionStorage.getItem('admin') === 'true') {
        localStorage.setItem('visitorCount', 1);
        document.getElementById('adminVisitorCount').textContent = 1;
        showAdminMessage('Counter pengunjung direset!');
    }
}

// ==================== DESKRIPSI ====================
function loadDeskripsi() {
    const saved = localStorage.getItem('deskripsiBag');
    if (saved) document.getElementById('deskripsiText').innerHTML = saved;
    document.getElementById('deskripsiEditor').value = document.getElementById('deskripsiText').innerHTML;
}

function saveDeskripsi() {
    if (sessionStorage.getItem('admin') !== 'true') return;
    const newDeskripsi = document.getElementById('deskripsiEditor').value;
    document.getElementById('deskripsiText').innerHTML = newDeskripsi;
    localStorage.setItem('deskripsiBag', newDeskripsi);
    showAdminMessage('Deskripsi berhasil disimpan!');
}

// ==================== BACKGROUND ====================
function applyBackground() {
    if (sessionStorage.getItem('admin') !== 'true') return;
    const selected = document.getElementById('bgGradient').value;
    document.body.style.background = selected;
    if (document.body.classList.contains('dark')) document.body.classList.remove('dark');
    showAdminMessage('Background berhasil diubah!');
}

function showAdminMessage(msg) {
    const msgEl = document.getElementById('adminMessage');
    msgEl.textContent = msg;
    setTimeout(() => msgEl.textContent = '', 3000);
}

// ==================== DAUN JATUH ====================
function startDaun() {
    if (daunInterval) return;
    daunInterval = setInterval(buatDaun, 500);
    document.querySelectorAll('.daun').forEach(d => d.classList.add('visible'));
}

function buatDaun() {
    const daun = document.createElement('div');
    daun.classList.add('daun', 'visible');
    const emojis = ['üåø', '‚òòÔ∏è', 'üçÄ', 'üå±', 'üçÉ'];
    daun.innerHTML = emojis[Math.floor(Math.random() * emojis.length)];
    daun.style.left = Math.random() * window.innerWidth + 'px';
    daun.style.animationDuration = (3 + Math.random() * 5) + 's';
    daun.style.fontSize = (15 + Math.random() * 20) + 'px';
    document.body.appendChild(daun);
    setTimeout(() => daun.remove(), 8000);
}

window.addEventListener('scroll', () => {
    const scrollTop = window.scrollY || document.documentElement.scrollTop;
    const scrollHeight = document.documentElement.scrollHeight;
    const clientHeight = document.documentElement.clientHeight;
    if (scrollTop + clientHeight >= scrollHeight - 50) startDaun();
});

// ==================== ADMIN PANEL ====================
function showAdminPanel() {
    document.getElementById('adminPanel').classList.remove('hidden');
}

function checkPassword() {
    if (document.getElementById('password').value === ADMIN_PASSWORD) {
        sessionStorage.setItem('admin', 'true');
        document.getElementById('loginForm').classList.add('hidden');
        document.getElementById('adminFeatures').classList.remove('hidden');
        document.getElementById('loginError').innerHTML = '';
        document.getElementById('deskripsiEditor').value = document.getElementById('deskripsiText').innerHTML;
        document.getElementById('adminVisitorCount').textContent = localStorage.getItem('visitorCount') || 1;
    } else {
        document.getElementById('loginError').innerHTML = 'Password salah!';
    }
}

function logout() {
    sessionStorage.removeItem('admin');
    document.getElementById('loginForm').classList.remove('hidden');
    document.getElementById('adminFeatures').classList.add('hidden');
    document.getElementById('password').value = '';
    document.getElementById('adminPanel').classList.add('hidden');
}

// ==================== DARK MODE ====================
function toggleMode() {
    document.body.classList.toggle('dark');
}

// ==================== INIT ====================
initVisitorCounter();
loadDeskripsi();
loadPhotos();
loadComments();

if (sessionStorage.getItem('admin') === 'true') {
    document.getElementById('loginForm').classList.add('hidden');
    document.getElementById('adminFeatures').classList.remove('hidden');
    document.getElementById('adminVisitorCount').textContent = localStorage.getItem('visitorCount') || 1;
}

window.onclick = function(event) {
    const modal = document.getElementById('myModal');
    if (event.target == modal) modal.style.display = 'none';
}
</script>

</body>
</html>
